
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{B as w,r as g,aj as z,ak as h,al as x,am as _,C as T,an as B,ao as A,ap as L,x as W,aq as j}from"./index-7a00c1dd.js";function E(u){var a;const n=h(u);return(a=n==null?void 0:n.$el)!=null?a:n}const D=x?window:void 0,I=x?window.document:void 0,R=x?window.navigator:void 0;function b(...u){let a,n,i,t;if(typeof u[0]=="string"||Array.isArray(u[0])?([n,i,t]=u,a=D):[a,n,i,t]=u,!a)return _;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const l=[],o=()=>{l.forEach(r=>r()),l.length=0},s=(r,f,p,v)=>(r.addEventListener(f,p,v),()=>r.removeEventListener(f,p,v)),c=T(()=>[E(a),h(t)],([r,f])=>{if(o(),!r)return;const p=B(f)?{...f}:f;l.push(...n.flatMap(v=>i.map(y=>s(r,v,y,p))))},{immediate:!0,flush:"post"}),d=()=>{c(),o()};return A(d),d}function O(){const u=g(!1);return L()&&W(()=>{u.value=!0}),u}function C(u){const a=O();return w(()=>(a.value,!!u()))}function q(u,a={}){const{controls:n=!1,navigator:i=R}=a,t=C(()=>i&&"permissions"in i);let l;const o=typeof u=="string"?{name:u}:u,s=g(),c=()=>{l&&(s.value=l.state)},d=j(async()=>{if(t.value){if(!l)try{l=await i.permissions.query(o),b(l,"change",c),c()}catch{s.value="prompt"}return l}});return d(),n?{state:s,isSupported:t,query:d}:s}function V(u={}){const{navigator:a=R,read:n=!1,source:i,copiedDuring:t=1500,legacy:l=!1}=u,o=C(()=>a&&"clipboard"in a),s=q("clipboard-read"),c=q("clipboard-write"),d=w(()=>o.value||l),r=g(""),f=g(!1),p=z(()=>f.value=!1,t);function v(){o.value&&s.value!=="denied"?a.clipboard.readText().then(e=>{r.value=e}):r.value=F()}d.value&&n&&b(["copy","cut"],v);async function y(e=h(i)){d.value&&e!=null&&(o.value&&c.value!=="denied"?await a.clipboard.writeText(e):S(e),r.value=e,f.value=!0,p.start())}function S(e){const m=document.createElement("textarea");m.value=e??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function F(){var e,m,k;return(k=(m=(e=document==null?void 0:document.getSelection)==null?void 0:e.call(document))==null?void 0:m.toString())!=null?k:""}return{isSupported:d,text:r,copied:f,copy:y}}const M=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function H(u,a={}){const{document:n=I,autoExit:i=!1}=a,t=w(()=>{var e;return(e=E(u))!=null?e:n==null?void 0:n.querySelector("html")}),l=g(!1),o=w(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(e=>n&&e in n||t.value&&e in t.value)),s=w(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(e=>n&&e in n||t.value&&e in t.value)),c=w(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(e=>n&&e in n||t.value&&e in t.value)),d=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(e=>n&&e in n),r=C(()=>t.value&&n&&o.value!==void 0&&s.value!==void 0&&c.value!==void 0),f=()=>d?(n==null?void 0:n[d])===t.value:!1,p=()=>{if(c.value){if(n&&n[c.value]!=null)return n[c.value];{const e=t.value;if((e==null?void 0:e[c.value])!=null)return!!e[c.value]}}return!1};async function v(){if(!(!r.value||!l.value)){if(s.value)if((n==null?void 0:n[s.value])!=null)await n[s.value]();else{const e=t.value;(e==null?void 0:e[s.value])!=null&&await e[s.value]()}l.value=!1}}async function y(){if(!r.value||l.value)return;p()&&await v();const e=t.value;o.value&&(e==null?void 0:e[o.value])!=null&&(await e[o.value](),l.value=!0)}async function S(){await(l.value?v():y())}const F=()=>{const e=p();(!e||e&&f())&&(l.value=e)};return b(n,M,F,!1),b(()=>E(t),M,F,!1),i&&A(v),{isSupported:r,isFullscreen:l,enter:y,exit:v,toggle:S}}export{H as a,V as u};
